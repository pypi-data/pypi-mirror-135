var L=Object.defineProperty,F=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var k=(e,t,o)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,S=(e,t)=>{for(var o in t||(t={}))z.call(t,o)&&k(e,o,t[o]);if(V)for(var o of V(t))K.call(t,o)&&k(e,o,t[o]);return e},C=(e,t)=>F(e,U(t));var _=(e,t,o)=>(k(e,typeof t!="symbol"?t+"":t,o),o);import{P as x,V as P,r as w,o as r,q as R,w as f,d as s,t as p,c as l,m as g,a8 as A,F as b,p as q,b as E,a as $,g as N,k as v}from"./vendor.c935fcc5.js";import{_ as T,A as D,E as O}from"./index.70d1c732.js";var G=Object.defineProperty,H=Object.getOwnPropertyDescriptor,J=(e,t,o,a)=>{for(var n=a>1?void 0:a?H(t,o):t,i=e.length-1,c;i>=0;i--)(c=e[i])&&(n=(a?c(t,o,n):c(n))||n);return a&&n&&G(t,o,n),n};const Q=["cancelled","completed","failed","pending","running","scheduled"],B="orion-color-mode";let j=class extends P{constructor(){super(...arguments);_(this,"colorMode",localStorage.getItem(B)||"Default");_(this,"colorModes",["Default","Achromatomaly","Achromatopsia","Protanomaly","Protaponia","Deuteranomaly","Deuteranopia","Tritanomaly","Tritanopia"]);_(this,"colorMap",{})}showToast(e){this.$toast(C(S({},e),{timeout:1e4}))}mounted(){const e=window.getComputedStyle(document.documentElement);this.colorModes.forEach(t=>{const o=t.toLowerCase();this.colorMap[t]=[],Q.forEach(a=>{const n=`--${a}-${o}`,i=e.getPropertyValue(n);i&&this.colorMap[t].push(i)})})}};j=J([x({components:{},watch:{colorMode(e){localStorage.setItem(B,e),document.body.classList.forEach(o=>{o.includes("-color-mode")&&document.body.classList.remove(o)}),document.body.classList.add(e.toLowerCase()+"-color-mode"),this.showToast({type:"success",message:"Color theme saved"})}}})],j);const W=j,X=e=>(q("data-v-ede455fe"),e=e(),E(),e),Y={class:"theme-option d-flex align-center"},Z=X(()=>s("i",{class:"pi pi-palette-line mr-1"},null,-1)),ee={class:"theme-option__label"},te={class:"theme-palette ml-auto"},oe={class:"theme-option d-flex align-center"},se={class:"theme-option__label"},ne={class:"theme-palette ml-auto"};function ae(e,t,o,a,n,i){const c=w("SimpleSelect");return r(),R(c,{modelValue:e.colorMode,"onUpdate:modelValue":t[0]||(t[0]=d=>e.colorMode=d),options:e.colorModes,search:""},{"selected-option-label":f(({label:d})=>[s("div",Y,[Z,s("span",ee,p(d),1),s("div",te,[(r(!0),l(b,null,g(e.colorMap[e.colorMode],u=>(r(),l("div",{key:u,class:"palette-option",style:A({"background-color":u})},null,4))),128))])])]),"option-label":f(({label:d})=>[s("div",oe,[s("span",se,p(d),1),s("div",ne,[(r(!0),l(b,null,g(e.colorMap[d],u=>(r(),l("div",{key:u,class:"palette-option",style:A({"background-color":u})},null,4))),128))])])]),_:1},8,["modelValue","options"])}var re=T(W,[["render",ae],["__scopeId","data-v-ede455fe"]]);var le=Object.defineProperty,ie=Object.getOwnPropertyDescriptor,ce=(e,t,o,a)=>{for(var n=a>1?void 0:a?ie(t,o):t,i=e.length-1,c;i>=0;i--)(c=e[i])&&(n=(a?c(t,o,n):c(n))||n);return a&&n&&le(t,o,n),n};let I=class extends P{constructor(){super(...arguments);_(this,"queries",{settings:D.query({endpoint:O.settings}),version:D.query({endpoint:O.version})});_(this,"resetDatabaseConfirmation","");_(this,"showResetSection",!1)}get settings(){return this.queries.settings.response}get version(){return this.queries.version.response}get settingsSections(){if(!this.settings)return[];const e=C(S({},this.settings),{base:{}});return Object.entries(e).forEach(([t,o])=>{this.objectCheck(o)?e[t]=o:(e.base[t]=o,delete e[t])}),this.flatten(Object.entries(e)).sort((t,o)=>t.key.toUpperCase().localeCompare(o.key.toUpperCase()))}async resetDatabase(){const e=await D.query({endpoint:O.database_clear,body:{confirm:!0}}).fetch();this.showToast({type:e.error?"error":"success",message:e.error?e.error:"Database reset"})}showToast(e){this.$toast(C(S({},e),{timeout:5e3}))}objectCheck(e){return e&&typeof e=="object"&&!Array.isArray(e)}flatten(e){return e.reduce((t,[o,a])=>{const n={key:o,content:void 0};return this.objectCheck(a)?n.content=this.flatten(Object.entries(a)):n.content=a,t.push(n),t},[])}};I=ce([x({components:{StateColorModeSelector:re}})],I);const de=I,m=e=>(q("data-v-3f194be8"),e=e(),E(),e),pe={class:"d-flex align-center justify-space-between"},ue=m(()=>s("span",{class:"d-flex align-center"},[s("i",{class:"pi pi-settings-3-line pi-2x text--grey-40"}),s("h1",{class:"ml-1"},"Settings")],-1)),he={class:"font-weight-semibold"},_e=m(()=>s("span",{class:"text--grey-40"},"Orion Version:",-1)),me={class:"ml-1"},ye={class:"mt-4"},fe=m(()=>s("h3",{class:"font-weight-semibold my-1"},"Color theme",-1)),ge={class:"font-weight-semibold setting--section-title my-1"},be={class:"setting--section-content font--secondary caption"},ve={class:"pa-2"},Se={key:0},Ce={class:"ml-1"},we={key:1},$e={class:"ml-1"},Me={class:"my-4"},ke=m(()=>s("h3",{class:"font-weight-semibold"},"Reset database",-1)),De=m(()=>s("div",{class:"d-flex align-end my-1 text--error"},[s("i",{class:"pi pi-error-warning-line pi-lg"}),s("span",{class:"ml-1"}," Resetting the database will permanently delete all data stored in Orion ")],-1)),Oe=v(" Reset "),je={key:1},Ie=m(()=>s("div",null," Are you sure you want to permanently delete your data? ",-1)),Ve=m(()=>s("div",null,[v(" If so, type the word "),s("span",{class:"text--error"},"CONFIRM"),v(" to proceed. ")],-1)),xe=v(" Reset Database "),Pe=v(" Cancel ");function Re(e,t,o,a,n,i){const c=w("StateColorModeSelector"),d=w("Button"),u=w("Input");return r(),l("div",null,[s("header",pe,[ue,s("span",he,[_e,s("span",me,p(e.version),1)])]),s("section",ye,[fe,$(c)]),(r(!0),l(b,null,g(e.settingsSections,h=>(r(),l("section",{key:h.label,class:"mt-4 setting--section my-2"},[s("h3",ge,p(h.key),1),s("section",be,[s("div",ve,[(r(!0),l(b,null,g(h.content,y=>(r(),l("div",{key:y.key},[Array.isArray(y.content)?(r(),l("div",Se,[(r(!0),l(b,null,g(y.content,M=>(r(),l("section",{key:M.key,class:"setting--section-subsection"},[s("span",null,p(M.key)+":",1),s("span",Ce,p(M.content),1)]))),128))])):(r(),l("div",we,[s("span",null,p(y.key)+":",1),s("span",$e,p(y.content),1)]))]))),128))])])]))),128)),s("section",Me,[ke,De,e.showResetSection?N("",!0):(r(),R(d,{key:0,color:"delete",height:"36px",width:"100px",class:"mt-1",onClick:t[0]||(t[0]=h=>e.showResetSection=!0),miter:""},{default:f(()=>[Oe]),_:1})),e.showResetSection?(r(),l("section",je,[Ie,Ve,$(u,{modelValue:e.resetDatabaseConfirmation,"onUpdate:modelValue":t[1]||(t[1]=h=>e.resetDatabaseConfirmation=h),placeholder:"CONFIRM",class:"my-2",style:{"max-width":"400px"}},null,8,["modelValue"]),s("div",null,[$(d,{color:"delete",height:"36px",disabled:e.resetDatabaseConfirmation!=="CONFIRM",miter:"",onClick:e.resetDatabase},{default:f(()=>[xe]),_:1},8,["disabled","onClick"]),$(d,{color:"secondary",height:"36px",width:"100px",class:"ml-2",miter:"",onClick:t[2]||(t[2]=h=>e.showResetSection=!1)},{default:f(()=>[Pe]),_:1})])])):N("",!0)])])}var Ne=T(de,[["render",Re],["__scopeId","data-v-3f194be8"]]);export{Ne as default};

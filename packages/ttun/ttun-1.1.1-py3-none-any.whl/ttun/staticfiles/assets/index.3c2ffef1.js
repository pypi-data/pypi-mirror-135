var W=Object.defineProperty,j=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var L=(e,s,r)=>s in e?W(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r,S=(e,s)=>{for(var r in s||(s={}))O.call(s,r)&&L(e,r,s[r]);if(y)for(var r of y(s))$.call(s,r)&&L(e,r,s[r]);return e},C=(e,s)=>j(e,B(s));var w=(e,s)=>{var r={};for(var o in e)O.call(e,o)&&s.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&y)for(var o of y(e))s.indexOf(o)<0&&$.call(e,o)&&(r[o]=e[o]);return r};import{r as t,c as _,R as J,a as U}from"./vendor.71a38677.js";const A=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerpolicy&&(a.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?a.credentials="include":n.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}};A();function q(){return window.location.host}var x;(function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED"})(x||(x={}));function z({onConnect:e}){const s=t.exports.useMemo(q,[]),[r,o]=t.exports.useState([]),[n,a]=t.exports.useState([]),i=t.exports.useCallback(()=>new WebSocket(`ws://${s}/inspect/`),[s]),[c,u]=t.exports.useState(()=>i()),[F,N]=t.exports.useState(c.readyState);return t.exports.useEffect(()=>{N(c.readyState);const E=()=>{N(c.readyState),u(i())},h=()=>{e(),N(c.readyState)},k=({data:D})=>{const{type:G,payload:v}=JSON.parse(D);switch(G){case"historic":const H=v.filter(({type:d})=>d==="request"),P=v.filter(({type:d})=>d==="response");o(d=>[...d,...H.map(({payload:g})=>g)]),a(d=>[...d,...P.map(({payload:g})=>g)]);break;case"request":o(d=>[...d,v]);break;case"response":a(d=>[...d,v]);break}};return c.addEventListener("message",k),c.addEventListener("close",E),c.addEventListener("open",h),()=>{c.removeEventListener("message",k),c.removeEventListener("close",E),c.removeEventListener("open",h)}},[c]),{calls:t.exports.useMemo(()=>r.map(E=>({request:E,response:n.find(({id:h})=>h===E.id)})),[r,n]),readyState:F}}const K="_app_1rrvr_1",V="_main_1rrvr_9",Q="_header_1rrvr_16",X="_sidebar_1rrvr_30",Y="_details_1rrvr_41",Z="_noRequest_1rrvr_47",ee="_noRequestSelected_1rrvr_47";var p={app:K,main:V,header:Q,sidebar:X,details:Y,noRequest:Z,noRequestSelected:ee};const te="_details_1xvog_1",se="_header_1xvog_9",re="_content_1xvog_14",ne="_summary_1xvog_20",oe="_tabs_1xvog_24",ae="_tab_1xvog_24",ce="_selected_1xvog_42",le="_emptySpace_1xvog_47",ie="_resend_1xvog_56",de="_headers_1xvog_60";var l={details:te,header:se,content:re,summary:ne,tabs:oe,tab:ae,selected:ce,emptySpace:le,resend:ie,headers:de};const ue="_requestSummary_11fqk_1",me="_statusCode_11fqk_9",pe="_info_11fqk_14",xe="_success_11fqk_14",Ee="_redirect_11fqk_14",_e="_clientError_11fqk_17",fe="_serverError_11fqk_17";var m={requestSummary:ue,statusCode:me,info:pe,success:xe,redirect:Ee,clientError:_e,serverError:fe};function f(e,s,r){return e>=s&&e<=r}function R({requestResponse:{request:e,response:s},className:r=""}){var n,a;const o=(n=s==null?void 0:s.status)!=null?n:0;return t.exports.createElement("div",{className:_(m.requestSummary,r)},t.exports.createElement("span",{className:m.method},e.method),t.exports.createElement("p",null,e.path),t.exports.createElement("span",{className:_(m.statusCode,{[m.info]:f(o,100,199),[m.success]:f(o,200,299),[m.redirect]:f(o,300,399),[m.clientError]:f(o,400,499),[m.serverError]:f(o,500,599)})},(a=s==null?void 0:s.status)!=null?a:"Loading..."))}const he="_content_13eis_1",ve="_header_13eis_9",ye="_body_13eis_19",be="_renderError_13eis_36";var b={content:he,header:ve,body:ye,renderError:be};function T(o){var n=o,{raw:e,setRaw:s}=n,r=w(n,["raw","setRaw"]);return t.exports.createElement("div",{className:b.content},t.exports.createElement("div",{className:b.header},t.exports.createElement("input",{id:"raw",type:"checkbox",checked:e,onChange:()=>s(!e)}),t.exports.createElement("label",{htmlFor:"raw"},"Raw")),t.exports.createElement("div",{className:b.body},(()=>{try{return Ne(C(S({},r),{raw:e}))}catch{return t.exports.createElement("div",{className:b.renderError},t.exports.createElement("p",null,"Body could not be rendered"),t.exports.createElement("a",{onClick:()=>s(!0)},"View raw"))}})()))}function Ne({data:e,raw:s=!1}){const r=t.exports.useMemo(()=>{if(s)return"";const[o,n]=Object.entries(e.headers).find(([a])=>a.toLowerCase()==="content-type");return n.toLowerCase().split(";")[0]},[e,s]);if(s)return t.exports.createElement("pre",null,atob(e.body));if(["application/pdf","text/html"].includes(r))return t.exports.createElement("iframe",{src:`data:${r};base64,${e.body}`,srcDoc:r==="text/html"?atob(e.body):void 0,loading:"lazy",sandbox:""});if(r.startsWith("application/json"))return t.exports.createElement(J,{src:JSON.parse(atob(e.body)),style:{padding:"1em",width:"100%",height:"100%"}});if(r.startsWith("audio"))return t.exports.createElement("audio",{src:`data:${r};base64,${e.body}`});if(r.startsWith("video"))return t.exports.createElement("video",{src:`data:${r};base64,${e.body}`});if(r.startsWith("image"))return t.exports.createElement("img",{src:`data:${r};base64,${e.body}`,alt:""});throw new Error("Not Rendered")}function ge({timing:e}){const s=t.exports.useMemo(()=>Math.round(e*1e3)/1e3,[e]),r=t.exports.useMemo(()=>s>1,[s]);return Number.isNaN(s)?null:t.exports.createElement(t.exports.Fragment,null,`${r?s:s*1e3}${r?"s":"ms"}`)}function I({title:e,headers:s}){return t.exports.createElement("div",{className:l.headers},t.exports.createElement("h2",null,e),Object.entries(s).map(([r,o])=>t.exports.createElement(t.exports.Fragment,null,t.exports.createElement("div",null,r),t.exports.createElement("div",null,o))))}function Se({requestResponse:e}){var i,c;const[s,r]=t.exports.useState("headers"),[o,n]=t.exports.useState(!1),a=t.exports.useCallback(async()=>fetch(`http://${q()}/resend/`,{method:"POST",body:JSON.stringify(C(S({},e.request),{id:void 0}))}),[e]);return t.exports.createElement("div",{className:l.details},t.exports.createElement("div",{className:l.header},t.exports.createElement(R,{requestResponse:e,className:l.summary}),t.exports.createElement("div",{className:l.tabs},t.exports.createElement("button",{onClick:()=>r("headers"),className:_(l.tab,{[l.selected]:s==="headers"})},"Headers"),t.exports.createElement("button",{onClick:()=>r("request"),className:_(l.tab,{[l.selected]:s==="request"})},"Request"),t.exports.createElement("button",{onClick:()=>r("response"),className:_(l.tab,{[l.selected]:s==="response"}),disabled:e.response===void 0},"Response"),t.exports.createElement("div",{className:l.emptySpace},t.exports.createElement(ge,{timing:(c=(i=e.response)==null?void 0:i.timing)!=null?c:NaN}),t.exports.createElement("button",{className:l.resend,onClick:()=>a()},"Resend")))),t.exports.createElement("div",{className:l.content},s==="headers"&&t.exports.createElement(t.exports.Fragment,null,t.exports.createElement(I,{title:"Request Headers",headers:e.request.headers}),e.response&&t.exports.createElement(I,{title:"Response Headers",headers:e.response.headers})),s==="request"&&t.exports.createElement(T,{data:e.request,raw:o,setRaw:n}),s==="response"&&e.response!==void 0&&t.exports.createElement(T,{data:e.response,raw:o,setRaw:n})))}const M={[x.CONNECTING]:"\u{1F534}",[x.OPEN]:"\u{1F7E2}",[x.CLOSING]:"\u{1F534}",[x.CLOSED]:"\u{1F534}"};function Ce(){const[e,s]=t.exports.useState(null),{calls:r,readyState:o}=z({onConnect:async()=>{const u=await(await fetch(`http://${q()}/config/`)).json();s(u)}});t.exports.useEffect(()=>{var u;const c=new URL((u=e==null?void 0:e.url)!=null?u:"https://loading...");document.title=`${M[o]} ${c.host} | TTUN`},[o,e==null?void 0:e.url]);const[n,a]=t.exports.useState(null),i=t.exports.useMemo(()=>n===null?null:r[n],[n,r]);return e&&t.exports.createElement("div",{className:p.app},t.exports.createElement("header",{className:p.header},M[o]," TTUN",t.exports.createElement("a",{href:e.url,target:"_blank"},e.url)),t.exports.createElement("main",{className:p.main},t.exports.createElement("ul",{className:p.sidebar},r.length>0?r.slice(0).reverse().map((c,u)=>t.exports.createElement("li",{onClick:()=>a(r.length-u-1),key:`request-${u}`},t.exports.createElement(R,{requestResponse:c}))):t.exports.createElement("div",{className:p.noRequest},t.exports.createElement("p",null,"No requests"))),t.exports.createElement("div",{className:p.details},i!==null?t.exports.createElement(Se,{requestResponse:i}):t.exports.createElement("div",{className:p.noRequestSelected},t.exports.createElement("p",null,"Select a request to inspect it")))))}U.exports.render(t.exports.createElement(Ce,null),document.getElementById("root"));
